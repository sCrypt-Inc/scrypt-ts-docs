"use strict";(self.webpackChunkscrypt_docs=self.webpackChunkscrypt_docs||[]).push([[673],{3905:(t,e,n)=>{n.d(e,{Zo:()=>c,kt:()=>f});var r=n(7294);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var s=r.createContext({}),p=function(t){var e=r.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},c=function(t){var e=p(t.components);return r.createElement(s.Provider,{value:e},t.children)},l={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},d=r.forwardRef((function(t,e){var n=t.components,o=t.mdxType,a=t.originalType,s=t.parentName,c=u(t,["components","mdxType","originalType","parentName"]),d=p(n),f=o,m=d["".concat(s,".").concat(f)]||d[f]||l[f]||a;return n?r.createElement(m,i(i({ref:e},c),{},{components:n})):r.createElement(m,i({ref:e},c))}));function f(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var a=n.length,i=new Array(a);i[0]=d;var u={};for(var s in e)hasOwnProperty.call(e,s)&&(u[s]=e[s]);u.originalType=t,u.mdxType="string"==typeof t?t:o,i[1]=u;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5607:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>u,toc:()=>p});var r=n(7462),o=(n(7294),n(3905));const a={title:"buildStateOutputFT",sidebar_position:3},i=void 0,u={unversionedId:"tokens/ft/buildstateoutputft",id:"tokens/ft/buildstateoutputft",title:"buildStateOutputFT",description:"Any instance of BSV20V1 or BSV20V2 contains the buildStateOutputFT method. Unlike the regular buildStateOutput method, this method inscribes the subsequent amount with an appropriate BSV-20 transfer inscription. The method takes the number of tokens to be transferred to the subsequent output as an argument.",source:"@site/docs/tokens/ft/buildstateoutputft.md",sourceDirName:"tokens/ft",slug:"/tokens/ft/buildstateoutputft",permalink:"/tokens/ft/buildstateoutputft",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"buildStateOutputFT",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Multiple Inputs with Different Contracts",permalink:"/tokens/ft/multiple"},next:{title:"FAQ",permalink:"/faq"}},s={},p=[],c={toc:p};function l(t){let{components:e,...n}=t;return(0,o.kt)("wrapper",(0,r.Z)({},c,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Any instance of ",(0,o.kt)("inlineCode",{parentName:"p"},"BSV20V1")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"BSV20V2")," contains the ",(0,o.kt)("inlineCode",{parentName:"p"},"buildStateOutputFT")," method. Unlike the regular ",(0,o.kt)("inlineCode",{parentName:"p"},"buildStateOutput")," method, this method inscribes the subsequent amount with an appropriate ",(0,o.kt)("a",{parentName:"p",href:"https://docs.1satordinals.com/bsv20#transfer-all-modes"},"BSV-20 transfer inscription"),". The method takes the number of tokens to be transferred to the subsequent output as an argument."),(0,o.kt)("p",null,"Below is an example of an FT counter contract:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"class CounterFTV2 extends BSV20V2 {\n\n    @prop(true)\n    counter: bigint\n\n    constructor(id: ByteString, max: bigint, dec: bigint, counter: bigint) {\n        super(id, max, dec)\n        this.init(...arguments)\n        this.counter = counter\n    }\n\n    @method(SigHash.ANYONECANPAY_SINGLE)\n    public inc(tokenAmt: bigint) {\n        this.counter++\n\n        const outputs = this.buildStateOutputFT(tokenAmt)\n\n        assert(\n            this.ctx.hashOutputs == hash256(outputs),\n            'hashOutputs check failed'\n        )\n    }\n\n}\n")),(0,o.kt)("p",null,"Each iteration will contain the number of tokens that was passed via ",(0,o.kt)("inlineCode",{parentName:"p"},"tokenAmt"),". Note that this amount cannot be larger than the amount in the previous iteration. If the amount is less than in the previous iteration, the remaining tokens will be returned as change."))}l.isMDXComponent=!0}}]);