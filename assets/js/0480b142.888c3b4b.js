"use strict";(self.webpackChunkscrypt_docs=self.webpackChunkscrypt_docs||[]).push([[836],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),f=a,h=d["".concat(l,".").concat(f)]||d[f]||u[f]||o;return n?r.createElement(h,i(i({ref:t},p),{},{components:n})):r.createElement(h,i({ref:t},p))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3584:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const o={sidebar_position:15},i="FAQ",s={unversionedId:"faq",id:"faq",title:"FAQ",description:"Smart contract call failure",source:"@site/docs/faq.md",sourceDirName:".",slug:"/faq",permalink:"/faq",draft:!1,tags:[],version:"current",sidebarPosition:15,frontMatter:{sidebar_position:15},sidebar:"tutorialSidebar",previous:{title:"Tutorial 10: Mint BSV20 V1 Token",permalink:"/tutorials/mint-bsv20-v1"},next:{title:"README",permalink:"/reference/"}},l={},c=[{value:"Smart contract call failure",id:"smart-contract-call-failure",level:2},{value:"Broadcast double-spending transactions",id:"broadcast-double-spending-transactions",level:2},{value:"1) for developers",id:"1-for-developers",level:3},{value:"2) for dApp users",id:"2-for-dapp-users",level:3},{value:"Input string too short",id:"input-string-too-short",level:2},{value:"No sufficient utxos",id:"no-sufficient-utxos",level:2}],p={toc:c};function u(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"faq"},"FAQ"),(0,a.kt)("h2",{id:"smart-contract-call-failure"},"Smart contract call failure"),(0,a.kt)("p",null,"If you receive a ",(0,a.kt)("inlineCode",{parentName:"p"},"mandatory-script-verify-flag-failed")," error when broadcasting a transaction, it means that one or more inputs calling a contract fails."),(0,a.kt)("p",null,"There are several possibilities for the failure."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Script evaluated without error but finished with a false/empty top stack element")," is the most common one. It means one of ",(0,a.kt)("a",{parentName:"p",href:"/how-to-write-a-contract/built-ins#assert"},"assert")," fails."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(3192).Z,width:"1742",height:"132"})),(0,a.kt)("p",null,"Another common error is ",(0,a.kt)("inlineCode",{parentName:"p"},"Signature must be zero for failed CHECK(MULTI)SIG operation"),", which means the signature is invalid in ",(0,a.kt)("a",{parentName:"p",href:"/how-to-write-a-contract/built-ins#checksig"},"checkSig")," or ",(0,a.kt)("a",{parentName:"p",href:"/how-to-write-a-contract/built-ins#checkmultisig"},"checkMultiSig"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(4767).Z,width:"1730",height:"138"})),(0,a.kt)("p",null,"You need to ",(0,a.kt)("a",{parentName:"p",href:"/how-to-debug-a-contract"},"debug the contract"),"."),(0,a.kt)("h2",{id:"broadcast-double-spending-transactions"},"Broadcast double-spending transactions"),(0,a.kt)("p",null,"You could get two different errors when broadcasting a double-spending transaction, depending on the status of the transaction you're trying to double-spend."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If the transaction you're trying to double-spend is still unconfirmed and in the mempool, the error would be ",(0,a.kt)("inlineCode",{parentName:"li"},"txn-mempool-conflict"),".")),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(3498).Z,width:"1170",height:"120"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If the transaction is already mined into a block and confirmed, the error would be ",(0,a.kt)("inlineCode",{parentName:"li"},"Missing inputs"),".")),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(9165).Z,width:"1020",height:"116"})),(0,a.kt)("h3",{id:"1-for-developers"},"1) for developers"),(0,a.kt)("p",null,"If you encounter these errors when running code, e.g., testing on testnet, it is likely because the ",(0,a.kt)("a",{parentName:"p",href:"/how-to-deploy-and-call-a-contract/#provider"},"provider")," you are using fails to update your UTXO in time and return UTXOs that have already been spent when you request. Using these UTXOs that have been spent to build transactions will result in a double-spending. This situation is transitory and is caused by the provider not updating UTXO set timely due to, e.g., the provider's server overloading due to heavy blockchain traffic."),(0,a.kt)("p",null,"To fix this issue, you generally only need to wait a few seconds and retry. If it still persists, you can also increase the time interal between sending consecutive transactions, for example, ",(0,a.kt)("inlineCode",{parentName:"p"},"sleep")," for some time after sending transactions before requesting the UTXO again, so that the provider has enough time to update the UTXO set:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"// ... contract call #1\n\nawait sleep(2000) // Sleep for 2 seconds\n\n// ... contract call #2\n")),(0,a.kt)("h3",{id:"2-for-dapp-users"},"2) for dApp users"),(0,a.kt)("p",null,"If you encounter these errors when ",(0,a.kt)("a",{parentName:"p",href:"/how-to-integrate-a-frontend/"},"using a dApp"),", it is likely because the state of dApp's contract has been changed by another user, who is interacting with the dApp at the same time. You are interacting with the contract instance that is stale, resulting in a double-spending."),(0,a.kt)("p",null,"To fix this issue, you usually only have to wait a few seconds, your local dApp will automatically obtain the latest contract state if it has ",(0,a.kt)("a",{parentName:"p",href:"/advanced/how-to-integrate-scrypt-service#listen-to-events"},"subscribed to contract events"),"; otherwise you have to manually refresh the browser and try again."),(0,a.kt)("h2",{id:"input-string-too-short"},"Input string too short"),(0,a.kt)("p",null,"If you do not set the ",(0,a.kt)("inlineCode",{parentName:"p"},"PRIVATE_KEY")," environment variable in ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," file before deploying a contract, you would get an ",(0,a.kt)("inlineCode",{parentName:"p"},"Input string too short")," error."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(8909).Z,width:"1978",height:"560"})),(0,a.kt)("p",null,"Please follow ",(0,a.kt)("a",{parentName:"p",href:"/how-to-deploy-and-call-a-contract/faucet"},"this guide")," to generate a new private key or export the private key from your Sensilet wallet, then fund the private key's address with our ",(0,a.kt)("a",{parentName:"p",href:"https://scrypt.io/faucet/"},"faucet"),"."),(0,a.kt)("h2",{id:"no-sufficient-utxos"},"No sufficient utxos"),(0,a.kt)("p",null,"If you don't fund your private key's address before deploying a contract, you would get a ",(0,a.kt)("inlineCode",{parentName:"p"},"No sufficient utxos")," error."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(3249).Z,width:"2042",height:"581"})),(0,a.kt)("p",null,"Please fund your address with our ",(0,a.kt)("a",{parentName:"p",href:"https://scrypt.io/faucet/"},"faucet")," first."))}u.isMDXComponent=!0},4767:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/checksig-failed-7c97f34e3a1aa956bfbcc8251b0cf96d.png"},3249:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/insufficient-balance-abd131922a236aeb2935376131a7e077.png"},3192:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/mandatory-script-verify-flag-failed-0882ec42a75fb4fe3ba99bfb6ce4b338.png"},9165:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/missing-inputs-1febf7888158afd54aa92fe2a4a01bf1.png"},8909:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/no-private-key-12f4c8462221021714a767e397139d5d.png"},3498:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/txn-mempool-conflict-6de17c4edce004ecf236d56eba0bfead.png"}}]);